<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

	<!-- CSS -->
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="/css/main.css">

    <title>Data will be</title>
    <script>
      function runCode() {
          let request = {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify("dataTest")
        }
        fetch('/all', request).then( res => res.json() )
        .then( data => {
          document.getElementById('result').innerHTML = JSON.stringify(data);
        })
        .catch( err => console.log(err) )
      }
  </script>
<script>
  function runCodeSpecifc() {
      console.log("inside runCodeSpecifc");
      let request = {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify("dataTest")
    }
    fetch('/all', request).then( res => res.json() )
    .then( data => {
      data = JSON.stringify(data);
      var data_filter = data.filter( element => element.Node =="Node1")
      console.log(data_filter)
      document.getElementById('result').innerHTML = JSON.stringify(data_filter);
    })
    .catch( err => console.log(err) )
  }
</script>


<!-- let numbers = { 
  "X": event.currentTarget.X.value,
  "Y": event.currentTarget.Y.value
}; -->
</head>
<body>

    <nav class="navbar navbar-default">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">WSN</a>
          </div>
          <ul class="nav navbar-nav">
            <li><a href="/">Home</a></li>
              <li><a href="/dashboard">Dashboard</a></li>
              <li class="active" ><a href="/data">Sensor Data</a></li>
          </ul>
        </div>
      </nav>
    <h1>Click one of the buttons to show some data</h1>
    <br></br>
    <button onclick="runCode()">Show all data on the database</button>
    <br></br>
    <button onclick="runCodeSpecifc()">Show all Node1 data</button>
    <br></br>


    <form onclick="runCodeSpecifc()">
      <label>Type reading number you want to display:
        <input type = "text" name="Y"  id="Y"></input>
        </label>
        <input type="submit" value="Submit"></input>
    </form>



    <div id="result"></div>

</body>
</html>